# è¿ç§»è®¡åˆ’ï¼šä» Flask åˆ° Next.js & Payload CMS

æœ¬æ–‡æ¡£æ¦‚è¿°äº†å°†åŸºäº Flask çš„åˆå”±å›¢æ›²åº“é¡¹ç›®ï¼ˆä½äº `../choirMem` ï¼‰è¿ç§»åˆ°ä½¿ç”¨ Next.js (å‰ç«¯) å’Œ Payload (æ— å¤´ CMS åç«¯) çš„ç°ä»£æŠ€æœ¯æ ˆï¼ˆæœ¬é¡¹ç›®ï¼‰æ‰€éœ€çš„è¯¦ç»†æ­¥éª¤ã€‚è¯¥è®¡åˆ’åˆ†ä¸ºå‡ ä¸ªä¸åŒé˜¶æ®µï¼Œä»æ•°æ®å»ºæ¨¡å¼€å§‹ï¼Œåˆ°å‰ç«¯å®ç°å’Œæ•°æ®è¿ç§»ç»“æŸã€‚

## ç¬¬ä¸€é˜¶æ®µï¼šåç«¯ - åœ¨ Payload ä¸­å¤åˆ¶æ•°æ®ç»“æ„ âœ…

ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œæ˜¯å°†æ‚¨çš„ SQLAlchemy æ¨¡å‹è½¬æ¢ä¸º Payload çš„é›†åˆï¼ˆCollectionsï¼‰å’Œå…¨å±€å˜é‡ï¼ˆGlobalsï¼‰ã€‚è¿™å°†æ„æˆæ–°çš„æ•°æ®åŸºç¡€ã€‚æ‰€æœ‰çš„é›†åˆé…ç½®æ–‡ä»¶éƒ½å·²åœ¨ `src/collections/` ç›®å½•ä¸‹åˆ›å»ºã€‚

### 1.1. æ ¸å¿ƒå†…å®¹é›†åˆ

è¿™äº›é›†åˆç›´æ¥å¯¹åº”äºæ‚¨ Flask åº”ç”¨ä¸­çš„ä¸»è¦å®ä½“ã€‚

1. æ›²ç›® (Tracks) (src/collections/Tracks.ts)

è¿™å°†æ˜¯éŸ³ä¹ä½œå“çš„é¡¶å±‚å®ä½“ã€‚

- **å­—æ®µ:**
  - `title` (`text`, å¿…éœ€)
  - `description` (`richText`)
- ç‰ˆæœ¬ (Versions) (src/collections/Versions.ts)

æ­¤é›†åˆå°†ä¸ Tracks å»ºç«‹å…³è”ã€‚

- **å­—æ®µ:**
  - `title` (`text`, å¿…éœ€): ä¾‹å¦‚ï¼Œ"SATB æ— ä¼´å¥åˆå”±ç‰ˆ"ã€‚
  - `notes` (`richText`): ç”¨äºè®°å½•ç‰ˆæœ¬ç‰¹å®šçš„ç»†èŠ‚ã€‚
  - `track` (`relationship`, å¿…éœ€, to: 'tracks'): æ‰€å±çš„çˆ¶çº§æ›²ç›®ã€‚
  - `creator` (`relationship`, å¿…éœ€, to: 'users'): åˆ›å»ºæ­¤ç‰ˆæœ¬çš„ç”¨æˆ·ã€‚
  - `tags` (`relationship`, hasMany, to: 'tags')
  - `likes` (`relationship`, hasMany, to: 'users'): ç”¨äºå­˜å‚¨ç”¨æˆ·çš„"å–œæ¬¢"ã€‚æˆ‘ä»¬å°†ä»ç®¡ç†ç•Œé¢éšè—æ­¤å­—æ®µï¼Œå¹¶é€šè¿‡é’©å­æˆ–ç«¯ç‚¹è¿›è¡Œç®¡ç†ã€‚
  - `avg_difficulty` (`number`, admin.readOnly): å°†é€šè¿‡é’©å­è®¡ç®—å¾—å‡ºã€‚
- ä¹è°± (Scores) (src/collections/Scores.ts)

è¿™å°†æ˜¯ä¸€ä¸ªç”¨äºä¸Šä¼  PDF æ–‡ä»¶çš„ upload é›†åˆã€‚

- **å­—æ®µ:**
  - `description` (`text`, å¿…éœ€): ä¾‹å¦‚ï¼Œ"æ€»è°±"ã€"å¥³é«˜éŸ³å£°éƒ¨è°±"ã€‚
  - `version` (`relationship`, å¿…éœ€, to: 'versions'): æ­¤ä¹è°±æ‰€å±çš„ç‰ˆæœ¬ã€‚
  - `uploader` (`relationship`, å¿…éœ€, to: 'users')ã€‚
- **ä¸Šä¼ é…ç½®:** å¯ç”¨ `staticDir` æ¥å­˜å‚¨æ–‡ä»¶ï¼Œå¹¶é…ç½®ä¸ºåªæ¥å— PDF æ–‡ä»¶ã€‚
- åª’ä½“ (Media) (src/collections/Media.ts)

è¿™å°†æ˜¯ç”¨äºå¤„ç†å›¾ç‰‡æ–‡ä»¶çš„ upload é›†åˆï¼Œæ›¿ä»£åŸæ¥çš„Photosé›†åˆã€‚

- **å­—æ®µ:**
  - `alt` (`text`, å¿…éœ€): ç”¨äºæ— éšœç¢è®¿é—®ã€‚
  - `caption` (`richText`)ã€‚
  - `version` (`relationship`, to: 'versions'): å°†ç…§ç‰‡å…³è”åˆ°ç‰¹å®šçš„æ¼”å‡ºç‰ˆæœ¬ã€‚
  - `uploader` (`relationship`, å¿…éœ€, to: 'users')ã€‚
- **ä¸Šä¼ é…ç½®:** é…ç½® `imageSizes` ä»¥ç”Ÿæˆå¿…è¦çš„ç¼©ç•¥å›¾ã€‚
- æ–‡ç«  (Articles) (src/collections/Articles.ts)

ç”¨äºç”¨æˆ·åˆ›ä½œçš„å†…å®¹ã€‚

- **å­—æ®µ:**
  - `title` (`text`, å¿…éœ€)ã€‚
  - `body` (`richText`, å¿…éœ€)ã€‚
  - `author` (`relationship`, å¿…éœ€, to: 'users')ã€‚
  - `publishedAt` (`date`)ã€‚
- ä¹é›† (UserCollections) (src/collections/UserCollections.ts)

ç”¨äºç”¨æˆ·åˆ›å»ºçš„ç‰ˆæœ¬åˆé›†ã€‚

- **å­—æ®µ:**
  - `name` (`text`, å¿…éœ€)ã€‚
  - `description` (`richText`)ã€‚
  - `creator` (`relationship`, å¿…éœ€, to: 'users')ã€‚
  - `versions` (`relationship`, hasMany, to: 'versions')ã€‚

### 1.2. è¾…åŠ©ä¸åˆ†ç±»é›†åˆ

è¿™äº›é›†åˆç”¨äºç»„ç»‡æ ¸å¿ƒå†…å®¹å¹¶ä¸ºå…¶æ·»åŠ å…ƒæ•°æ®ã€‚

**1. æ ‡ç­¾ (Tags) (`src/collections/Tags.ts`)**

- **å­—æ®µ:**
  - `name` (`text`, å¿…éœ€, å”¯ä¸€)ã€‚

**2. è¯„è®º (Comments) (`src/collections/Comments.ts`)**

- **å­—æ®µ:**
  - `body` (`textarea`, å¿…éœ€)ã€‚
  - `author` (`relationship`, å¿…éœ€, to: 'users')ã€‚
  - `track` (`relationship`, to: 'tracks')ã€‚
  - `version` (`relationship`, to: 'versions')ã€‚
  - *æ³¨æ„:* æ·»åŠ ä¸€ä¸ªé’©å­æ¥éªŒè¯ `track` æˆ– `version` å­—æ®µå¿…é¡»æœ‰ä¸€ä¸ªè¢«å¡«å……ï¼Œä½†ä¸èƒ½ä¸¤è€…éƒ½è¢«å¡«å……ã€‚
- è¯„åˆ† (Ratings) (src/collections/Ratings.ts)

æ­¤é›†åˆå°†å­˜å‚¨ç”¨æˆ·å¯¹ç‰ˆæœ¬çš„è¯„åˆ†ã€‚

- **å­—æ®µ:**
  - `user` (`relationship`, å¿…éœ€, to: 'users')ã€‚
  - `version` (`relationship`, å¿…éœ€, to: 'versions')ã€‚
  - `difficulty` (`number`, å¿…éœ€, min: 1, max: 5)ã€‚
- **ç®¡ç†ç•Œé¢:** åœ¨ `['user', 'version']` ä¸Šè®¾ç½®å”¯ä¸€ç´¢å¼•ï¼Œä»¥ç¡®ä¿æ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªç‰ˆæœ¬åªèƒ½è¯„åˆ†ä¸€æ¬¡ã€‚

### 1.3. ç”¨æˆ·ä¸ç³»ç»Ÿé›†åˆ

è¿™äº›ç”¨äºç®¡ç†ç”¨æˆ·ã€æƒé™å’Œç³»ç»ŸèŒƒå›´çš„è®¾ç½®ã€‚

1. ç”¨æˆ· (Users) (src/collections/Users/index.ts) - ä¿®æ”¹ç°æœ‰

è‡ªå®šä¹‰ç°æœ‰çš„ Users é›†åˆã€‚

- **æ–°å¢å­—æ®µ:**
  - `username` (`text`, å¿…éœ€, å”¯ä¸€)ã€‚
  - `group` (`relationship`, to: 'permission-groups')ã€‚
  - `avatar` (`upload`, relationTo: 'media')ã€‚
  - `bio` (`richText`)ã€‚
  - `activity_score` (`number`, admin.readOnly)ã€‚

**2. æƒé™ç»„ (PermissionGroups) (`src/collections/PermissionGroups.ts`)**

- **å­—æ®µ:**
  - `name` (`text`, å¿…éœ€, å”¯ä¸€)ã€‚
  - `can_view_scores` (`checkbox`)ã€‚
  - `can_upload_scores` (`checkbox`)ã€‚
  - `can_upload_photos` (`checkbox`)ã€‚
  - `can_post_comments` (`checkbox`)ã€‚
  - `can_create_tracks` (`checkbox`)ã€‚

**3. é‚€è¯·ç  (InvitationCodes) (`src/collections/InvitationCodes.ts`)**

- **å­—æ®µ:**
  - `code` (`text`, å¿…éœ€, å”¯ä¸€)ã€‚
  - `group` (`relationship`, å¿…éœ€, to: 'permission-groups')ã€‚
  - `total_uses` (`number`)ã€‚
  - `uses_left` (`number`)ã€‚

### 1.4. ç³»ç»Ÿå…¨å±€å˜é‡

Flask ä¸­çš„ `SystemSetting` æ¨¡å‹æœ€é€‚åˆç”¨ Payload çš„ **å…¨å±€å˜é‡ (Global)** æ¥å®ç°ã€‚

**1. ç³»ç»Ÿè®¾ç½® (SystemSettings) (`src/globals/SystemSettings.ts`)**

- **å­—æ®µ:**
  - `registration_enabled` (`checkbox`)ã€‚
  - `homepage_photo_max` (`number`)ã€‚
  - `ai_polish_prompt` (`textarea`)ã€‚

åˆ›å»ºå®Œè¿™äº›æ–‡ä»¶åï¼Œè¯·è®°å¾—å°†å®ƒä»¬æ·»åŠ åˆ°æ‚¨çš„ `src/payload.config.ts` æ–‡ä»¶çš„ `collections` å’Œ `globals` æ•°ç»„ä¸­ã€‚

âœ… **ç¬¬ä¸€é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
- æ‰€æœ‰é›†åˆå’Œå…¨å±€å˜é‡å·²åˆ›å»º
- æ‰€æœ‰é›†åˆå·²æ·»åŠ åˆ°payload.config.ts
- ç±»å‹å®šä¹‰å·²é‡æ–°ç”Ÿæˆ
- æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨å¹¶è¿è¡Œ

## ç¬¬äºŒé˜¶æ®µï¼šå®ç°è®¿é—®æ§åˆ¶

âœ… **ç¬¬äºŒé˜¶æ®µæ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
- å·²ä¸ºæ‰€æœ‰é›†åˆå’Œå…¨å±€å˜é‡é…ç½®è®¿é—®æ§åˆ¶
- å·²åˆ›å»ºå’Œé…ç½®è®¿é—®æ§åˆ¶è¾…åŠ©å‡½æ•°

Payload çš„è®¿é—®æ§åˆ¶åŠŸèƒ½æ˜¯æ‚¨ Flask è£…é¥°å™¨çš„ç›´æ¥æ›¿ä»£å“ã€‚æ‚¨å°†ä¸»è¦åœ¨ `src/access/` ç›®å½•ä¸­å®šä¹‰å®ƒä»¬ã€‚

1. ä½¿ç”¨Payloadå†…ç½®æƒé™ç®¡ç†ï¼š

Payload CMS æä¾›äº†å†…ç½®çš„æƒé™ç®¡ç†åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™äº›åŠŸèƒ½æ›¿ä»£è‡ªå®šä¹‰çš„PermissionGroupså®ç°ã€‚

- **ç”¨æˆ·è§’è‰²ç®¡ç†**: ä½¿ç”¨Payloadå†…ç½®çš„ç”¨æˆ·è§’è‰²ç³»ç»Ÿ
- **æƒé™æ§åˆ¶**: é€šè¿‡Payloadçš„è®¿é—®æ§åˆ¶APIå®ç°ç»†ç²’åº¦æƒé™æ§åˆ¶
- **è®¤è¯**: ä½¿ç”¨Payloadå†…ç½®çš„è®¤è¯æœºåˆ¶

2. åˆ›å»ºä¸€ä¸ªé›†ä¸­çš„æƒé™æ£€æŸ¥å™¨ï¼š

åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç”¨äºæ ¹æ®æ‰€éœ€æƒé™æ£€æŸ¥ç”¨æˆ·çš„æƒé™ç»„ã€‚

```
// src/access/hasPermission.ts
import { Access } from 'payload';
import { User } from '../payload-types';

export const hasPermission = (permission: string): Access<any, User> => ({ req: { user } }) => {
  if (!user) {
    return false;
  }

  if (user.is_admin) {
    return true;
  }

  if (user.group && typeof user.group === 'object') {
    return user.group[permission] || false;
  }

  return false;
}
```

2. å°†è®¿é—®æ§åˆ¶åº”ç”¨äºé›†åˆï¼š

åœ¨æ‚¨çš„é›†åˆé…ç½®ä¸­ä½¿ç”¨æ­¤è¾…åŠ©å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ src/collections/Scores.ts ä¸­ï¼š

```
// ...
import { hasPermission } from '../access/hasPermission';
import { authenticated } from '../access/authenticated';

export const Scores: CollectionConfig = {
  slug: 'scores',
  access: {
    create: hasPermission('can_upload_scores'),
    read: hasPermission('can_view_scores'),
    update: authenticated, // æˆ–æ›´å…·ä½“çš„æ£€æŸ¥
    delete: authenticated, // æˆ–æ›´å…·ä½“çš„æ£€æŸ¥
  },
  // ...
}
```

## ç¬¬ä¸‰é˜¶æ®µï¼šä½¿ç”¨é’©å­å¤åˆ¶ä¸šåŠ¡é€»è¾‘

âœ… **ç¬¬ä¸‰é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
- å·²ä¸ºæ‰€æœ‰éœ€è¦çš„é›†åˆé…ç½®è®¿é—®æ§åˆ¶é’©å­
- å·²åˆ›å»ºå’Œé…ç½®æ‰€æœ‰è®¿é—®æ§åˆ¶è¾…åŠ©å‡½æ•°
- å·²å®ç°TrackVersionså¹³å‡éš¾åº¦åŠ¨æ€è®¡ç®—åŠŸèƒ½
- å·²å®ç°Scoresã€TrackVersionså’ŒCommentsé›†åˆçš„æ´»åŠ¨åˆ†æ•°åŠ¨æ€è®¡ç®—åŠŸèƒ½
- å·²å°†TrackVersionRatingsåˆå¹¶åˆ°TrackVersionsé›†åˆä¸­
- æœåŠ¡å™¨å·²æˆåŠŸé‡å¯å¹¶è¿è¡Œ

## ç¬¬å››é˜¶æ®µï¼šå½“å‰çŠ¶æ€åˆ†æä¸ä¸‹ä¸€æ­¥è®¡åˆ’

âœ… **ç¬¬å››é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
- å·²æˆåŠŸå°†TrackVersionRatingsåˆå¹¶åˆ°TrackVersionsé›†åˆä¸­
- å·²ä¿®å¤updateRatings.tsä¸­çš„ç±»å‹é”™è¯¯
- å·²é‡å¯å¼€å‘æœåŠ¡å™¨å¹¶éªŒè¯åŠŸèƒ½æ­£å¸¸

## ç¬¬äº”é˜¶æ®µï¼šå®Œå–„æƒé™ç®¡ç†åŠŸèƒ½

âœ… **ç¬¬äº”é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ**
- å·²åœ¨PermissionGroupsé›†åˆä¸­æ·»åŠ æ›´å¤šæƒé™å­—æ®µ
- å·²åœ¨Usersé›†åˆä¸­æ·»åŠ is_adminå­—æ®µ
- å·²æ›´æ–°æƒé™æ£€æŸ¥å™¨ä»¥æ­£ç¡®å¤„ç†ç®¡ç†å‘˜æƒé™
- å·²ä¸ºUserså’ŒInvitationCodesé›†åˆæ·»åŠ è®¿é—®æ§åˆ¶
- å·²é‡æ–°ç”Ÿæˆç±»å‹å®šä¹‰å¹¶é‡å¯å¼€å‘æœåŠ¡å™¨

## ç¬¬å››é˜¶æ®µï¼šå½“å‰çŠ¶æ€åˆ†æä¸ä¸‹ä¸€æ­¥è®¡åˆ’

### 4.1. å½“å‰çŠ¶æ€åˆ†æ

æ ¹æ®å¯¹ç°æœ‰Payloadé¡¹ç›®çš„åˆ†æï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒæ•°æ®æ¨¡å‹å·²ç»å®ç°ï¼Œä½†ä¸æ—§Flaské¡¹ç›®ç›¸æ¯”ä»æœ‰ä¸€äº›å·®å¼‚ã€‚

#### 4.1.1. å·²å®ç°çš„æ¨¡å‹æ˜ å°„

| Flaskæ¨¡å‹ | Payloadé›†åˆ | çŠ¶æ€ | å¤‡æ³¨ |
|-----------|-------------|------|------|
| User | Users | âœ… å·²å®ç° | å­—æ®µç•¥æœ‰å·®å¼‚ |
| PermissionGroup | PermissionGroups | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| Track | Tracks | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| Version | TrackVersions | âœ… å·²å®ç° | åç§°ç•¥æœ‰å·®å¼‚ |
| Score | Scores | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| Comment | Comments | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| Tag | Tags | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| Rating | TrackVersions.ratings | âœ… å·²é‡æ„ | å·²å°†TrackVersionRatingsåˆå¹¶åˆ°TrackVersionsé›†åˆä¸­ |
| Collection | UserCollections | âœ… å·²å®ç° | åç§°ç•¥æœ‰å·®å¼‚ |
| InvitationCode | InvitationCodes | âœ… å·²å®ç° | å­—æ®µåŸºæœ¬ä¸€è‡´ |
| SystemSetting | SystemSettings | âœ… å·²å®ç° | å­—æ®µç•¥æœ‰å·®å¼‚ |
| Photo | Media | âœ… å·²å®ç° | å·²åˆå¹¶åˆ°Mediaé›†åˆ |
| Article | Articles | ğŸ”„ å¾…å®ç° | éœ€è¦åˆ›å»ºArticlesé›†åˆ |

#### 4.1.2. ç¼ºå¤±çš„æ¨¡å‹

ä»¥ä¸‹æ¨¡å‹åœ¨æ—§Flaské¡¹ç›®ä¸­å­˜åœ¨ï¼Œä½†åœ¨æ–°çš„Payloadé¡¹ç›®ä¸­å°šæœªå®ç°ï¼š

1. **Article** - ç½²åæ–‡ç« æ¨¡å‹

#### 4.1.3. æ¨¡å‹å­—æ®µå·®å¼‚

##### Usersæ¨¡å‹å·®å¼‚

| Flaskå­—æ®µ | Payloadå­—æ®µ | å·®å¼‚è¯´æ˜ |
|------------|-------------|----------|
| username | username | åŸºæœ¬ä¸€è‡´ |
| password_hash | (å†…ç½®) | Payloadä½¿ç”¨å†…ç½®è®¤è¯ |
| is_admin | (é€šè¿‡PermissionGroup) | æƒé™æ§åˆ¶æ–¹å¼ä¸åŒ |
| group_id | group | å…³ç³»å­—æ®µå‘½åä¸åŒ |
| avatar_filename | avatar | å­—æ®µç±»å‹ä¸åŒï¼ˆå…³ç³»vsæ–‡ä»¶ï¼‰ |
| bio | bio | åŸºæœ¬ä¸€è‡´ |
| activity_score | activity_score | åŸºæœ¬ä¸€è‡´ |
| last_seen | (é€šè¿‡timestamps) | Payloadä½¿ç”¨å†…ç½®æ—¶é—´æˆ³ |

##### SystemSettingsæ¨¡å‹å·®å¼‚

| Flaskå­—æ®µ | Payloadå­—æ®µ | å·®å¼‚è¯´æ˜ |
|------------|-------------|----------|
| key/valueå­˜å‚¨ | å…·ä½“å­—æ®µ | å®ç°æ–¹å¼ä¸åŒ |
| registration_enabled | registration_enabled | åŸºæœ¬ä¸€è‡´ |
| - | homepage_photo_max | æ–°å¢å­—æ®µ |
| - | ai_polish_prompt | æ–°å¢å­—æ®µ |

### 4.2. åŠŸèƒ½å®ç°å¯¹æ¯”

#### 4.2.1. å·²å®ç°åŠŸèƒ½

1. **ç”¨æˆ·è®¤è¯** - Payloadå†…ç½®è®¤è¯ç³»ç»Ÿ
2. **æƒé™æ§åˆ¶** - é€šè¿‡PermissionGroupså®ç°ï¼ˆè®¡åˆ’ä½¿ç”¨Payloadå†…ç½®æƒé™ï¼‰
3. **æ•°æ®æ¨¡å‹** - æ ¸å¿ƒæ¨¡å‹å·²åŸºæœ¬è¿ç§»
4. **å¯Œæ–‡æœ¬ç¼–è¾‘** - é›†æˆLexicalç¼–è¾‘å™¨
5. **æ–‡ä»¶ä¸Šä¼ ** - Scoreæ¨¡å‹å·²å®ç°PDFä¸Šä¼ 

#### 4.2.2. å¾…å®ç°åŠŸèƒ½

1. **Articleæ¨¡å‹åŠæ–‡ç« ç®¡ç†åŠŸèƒ½**
2. **å‰ç«¯é¡µé¢å¼€å‘** (Next.js)
3. **AIæ–‡æœ¬æ¶¦è‰²åŠŸèƒ½**
4. **å®æ—¶æ ‡é¢˜æ£€æŸ¥åŠŸèƒ½**
5. **åŠ¨æ€åŠ è½½(æ— é™æ»šåŠ¨)åŠŸèƒ½**
6. **å³æ—¶ç¼–è¾‘åŠŸèƒ½**
7. **å›¾ç‰‡/PDFé¢„è§ˆåŠŸèƒ½**

### 4.3. ä¸‹ä¸€æ­¥è¿ç§»è®¡åˆ’

#### 4.3.1. ç¬¬ä¸€é˜¶æ®µï¼šå®Œå–„æ•°æ®æ¨¡å‹ (1-2å¤©)

1. å®ç°ç¼ºå¤±çš„Articleæ¨¡å‹
   - åˆ›å»ºArticlesé›†åˆ
   - æ·»åŠ ç›¸å…³å­—æ®µï¼ˆtitle, body, authorç­‰ï¼‰

2. å®Œå–„ç°æœ‰æ¨¡å‹çš„å­—æ®µ
   - åœ¨Usersæ¨¡å‹ä¸­æ·»åŠ last_seenå­—æ®µ
   - ç¡®ä¿æ‰€æœ‰æ¨¡å‹éƒ½æœ‰é€‚å½“çš„ç´¢å¼•å’ŒéªŒè¯è§„åˆ™

#### 4.3.2. ç¬¬äºŒé˜¶æ®µï¼šåç«¯åŠŸèƒ½å¼€å‘ (3-5å¤©)

1. å®ç°AIæ–‡æœ¬æ¶¦è‰²åŠŸèƒ½
   - åˆ›å»ºAPIç«¯ç‚¹
   - é›†æˆé˜¿é‡Œäº‘DashScopeæœåŠ¡
   - å®ç°æ–‡æœ¬æ¶¦è‰²é€»è¾‘

2. å®ç°å®æ—¶æ ‡é¢˜æ£€æŸ¥åŠŸèƒ½
   - åˆ›å»ºAPIç«¯ç‚¹
   - å®ç°æ ‡é¢˜å”¯ä¸€æ€§æ£€æŸ¥é€»è¾‘

3. å®ç°åŠ¨æ€è®¡ç®—å¹³å‡éš¾åº¦åŠŸèƒ½
   - åœ¨TrackVersionsæ¨¡å‹ä¸­æ·»åŠ hook
   - å®ç°è¯„åˆ†æ›´æ–°æ—¶è‡ªåŠ¨è®¡ç®—å¹³å‡éš¾åº¦

#### 4.3.3. ç¬¬ä¸‰é˜¶æ®µï¼šå‰ç«¯å¼€å‘ (5-10å¤©)

1. æ­å»ºNext.jså‰ç«¯æ¡†æ¶
   - é…ç½®è·¯ç”±
   - å®ç°åŸºç¡€å¸ƒå±€å’ŒUIç»„ä»¶

2. å®ç°æ ¸å¿ƒé¡µé¢
   - é¦–é¡µï¼ˆæ›²ç›®åˆ—è¡¨ï¼‰
   - æ›²ç›®è¯¦æƒ…é¡µ
   - ç‰ˆæœ¬è¯¦æƒ…é¡µ
   - ç”¨æˆ·ä¸ªäººé¡µ
   - ç®¡ç†åå°é¡µ

3. å®ç°äº¤äº’åŠŸèƒ½
   - æ— é™æ»šåŠ¨åŠ è½½
   - å³æ—¶ç¼–è¾‘
   - å›¾ç‰‡/PDFé¢„è§ˆ
   - è¯„è®ºåŠŸèƒ½

#### 4.3.4. ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•ä¸ä¼˜åŒ– (2-3å¤©)

1. æ•°æ®è¿ç§»æµ‹è¯•
2. åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
3. æ€§èƒ½ä¼˜åŒ–
4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 4.4. é£é™©ä¸æ³¨æ„äº‹é¡¹

1. **æ•°æ®è¿ç§»** - éœ€è¦è°¨æ…å¤„ç†ä»æ—§æ•°æ®åº“åˆ°æ–°æ•°æ®åº“çš„æ•°æ®è¿ç§»
2. **æƒé™æ§åˆ¶** - ç¡®ä¿æ–°çš„æƒé™ç³»ç»Ÿä¸æ—§ç³»ç»Ÿè¡Œä¸ºä¸€è‡´
3. **æ–‡ä»¶å¤„ç†** - ç¡®ä¿ä¸Šä¼ çš„æ–‡ä»¶èƒ½å¤Ÿæ­£ç¡®å­˜å‚¨å’Œè®¿é—®
4. **å…¼å®¹æ€§** - ç¡®ä¿æ–°ç³»ç»Ÿä¸æ—§ç³»ç»Ÿçš„APIå…¼å®¹æ€§ï¼ˆå¦‚æœæœ‰å¤–éƒ¨ä¾èµ–ï¼‰